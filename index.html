<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pet Paradise - Pet Store Engagement App</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
      font-size: 18px;
      background: linear-gradient(rgba(255,255,255,0.85), rgba(255,255,255,0.85)),
        url('https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=1500&q=80') center/cover no-repeat fixed;
      transition: background 1s;
      color: #2d2d2d;
    }
    body {
      min-height: 100vh;
      width: 100vw;
      display: block;
      font-family: 'Quicksand', Arial, sans-serif;
      box-sizing: border-box;
      overflow-x: hidden;
    }
    .container {
      max-width: 900px;
      width: 98vw;
      margin: 2.5rem auto 2rem auto;
      background: rgba(255,255,255,0.97);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.18);
      padding: 2.5rem 2.5rem 2rem 2.5rem;
      backdrop-filter: blur(6px);
      animation: fadeIn 1.2s;
    }
    @media (max-width: 700px) {
      .container { padding: 1rem; }
      html, body { font-size: 15px; }
    }
    h1, h2, h3, h4, h5 {
      color: #3b2e2a;
      font-weight: 700;
      letter-spacing: 1px;
      margin-bottom: 0.5rem;
    }
    h1 { font-size: 2.7rem; text-align: center; }
    h2 { font-size: 1.5rem; }
    .pet-emoji {
      font-size: 2.5rem;
      display: block;
      text-align: center;
      margin-bottom: 1.2rem;
      animation: bounce 1.5s infinite alternate;
    }
    @keyframes bounce {
      0% { transform: translateY(0); }
      100% { transform: translateY(-10px); }
    }
    label {
      font-weight: 700;
      color: #5a463a;
      margin-bottom: 0.2rem;
      display: block;
      font-size: 1.1rem;
    }
    input, textarea {
      width: 100%;
      padding: 1rem;
      margin: 0.4rem 0 1.2rem 0;
      border: 1.5px solid #e0d5cf;
      border-radius: 8px;
      font-size: 1.1rem;
      font-family: inherit;
      background: #f9f6f3;
      transition: border 0.3s, box-shadow 0.3s;
    }
    input:focus, textarea:focus {
      border-color: #ffb347;
      box-shadow: 0 0 0 2px #ffe0b2;
      outline: none;
    }
    button {
      width: 100%;
      padding: 1rem;
      background: linear-gradient(90deg, #ffb347 0%, #ffcc80 100%);
      color: #3b2e2a;
      border: none;
      border-radius: 8px;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      margin-bottom: 1rem;
      box-shadow: 0 2px 8px rgba(255,179,71,0.08);
      transition: background 0.3s, transform 0.2s;
    }
    button:hover {
      background: linear-gradient(90deg, #ffcc80 0%, #ffb347 100%);
      transform: translateY(-2px) scale(1.03);
    }
    .dark-toggle {
      position: fixed;
      top: 22px;
      right: 22px;
      z-index: 100;
      background: #fffbe7;
      border-radius: 30px;
      box-shadow: 0 2px 8px #ffe082;
      padding: 0.5rem 1.2rem 0.5rem 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      border: 2px solid #ffb347;
      transition: background 0.3s, border 0.3s;
    }
    .dark-toggle input[type="checkbox"] {
      width: 1.5em;
      height: 1.5em;
      accent-color: #ffb347;
      margin-right: 0.5em;
      cursor: pointer;
    }
    .dark-toggle:hover {
      background: #ffe082;
      border: 2px solid #ff9800;
    }
    .carousel {
      width: 100%;
      max-width: 700px;
      margin: 1.5rem auto 2rem auto;
      position: relative;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(44,62,80,0.10);
      background: #fff;
    }
    .carousel-slide {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 260px;
      transition: transform 0.7s cubic-bezier(0.33, 1, 0.68, 1);
      position: absolute;
      top: 0; left: 0;
      opacity: 0;
      pointer-events: none;
    }
    .carousel-slide.active {
      opacity: 1;
      pointer-events: auto;
      position: relative;
      z-index: 2;
      transform: scale(1.04);
    }
    .carousel-slide img {
      height: 180px;
      width: 260px;
      object-fit: cover;
      border-radius: 12px;
      margin-right: 2rem;
      box-shadow: 0 2px 8px #ffe082;
    }
    .carousel-slide .desc {
      font-size: 1.15rem;
      color: #4a3427;
      max-width: 320px;
    }
    .carousel-controls {
      position: absolute;
      width: 100%;
      top: 50%;
      left: 0;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      z-index: 3;
    }
    .carousel-btn {
      background: #fffbe7;
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      font-size: 1.5rem;
      color: #ff9800;
      box-shadow: 0 2px 8px #ffe082;
      cursor: pointer;
      transition: background 0.2s;
    }
    .carousel-btn:hover { background: #ffe082; }
    /* Modal for spin result */
    .modal {
      display: none;
      position: fixed;
      z-index: 200;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.45);
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: #fffbe7;
      color: #3b2e2a;
      padding: 2rem 2.5rem;
      border-radius: 18px;
      box-shadow: 0 4px 24px #ffe082;
      font-size: 1.3rem;
      text-align: center;
      max-width: 90vw;
      min-width: 260px;
      font-weight: 700;
      position: relative;
    }
    .modal-content button {
      width: auto;
      margin-top: 1.2rem;
      padding: 0.7rem 2.2rem;
      font-size: 1.1rem;
    }
    /* Dark mode overrides */
    body.dark-mode, .dark-mode body {
      background: linear-gradient(rgba(40,40,40,0.92),rgba(40,40,40,0.92)),url('https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=1500&q=80') center/cover no-repeat fixed !important;
      color: #f5f5f5 !important;
    }
    .dark-mode .container {
      background: rgba(40,40,40,0.97) !important;
      color: #f5f5f5 !important;
    }
    .dark-mode h1, .dark-mode h2, .dark-mode h3, .dark-mode h4, .dark-mode h5 {
      color: #ffe082 !important;
    }
    .dark-mode .carousel {
      background: #23272f !important;
    }
    .dark-mode .carousel-slide .desc {
      color: #ffe082 !important;
    }
    .dark-mode .modal-content {
      background: #23272f !important;
      color: #ffe082 !important;
    }
    .dark-toggle {
      background: #23272f !important;
      color: #ffe082 !important;
      border: 2px solid #ffe082 !important;
    }
    .dark-toggle:hover {
      background: #444 !important;
      border: 2px solid #ffb347 !important;
    }
  </style>
</head>
<body>
  <div class="dark-toggle" id="darkModeToggle">
    <input type="checkbox" id="toggleDark" />
    <span>üåô Dark Mode</span>
  </div>
  <div class="container">
    <span class="pet-emoji">üê∂üê±üêæ</span>
    <h1 id="welcomeTitle">Welcome to Pet Paradise</h1>
    <div id="welcomeBackMsg" style="display:none;text-align:center;font-size:1.2rem;margin-bottom:1.2rem;"></div>
    <!-- About Section -->
    <div id="aboutSection" class="section">
      <h2>About Pet Paradise</h2>
      <div class="carousel" id="serviceCarousel">
        <div class="carousel-slide active">
          <img src="https://images.unsplash.com/photo-1518715308788-3005759c61d3?auto=format&fit=crop&w=600&q=80" alt="Grooming" />
          <div class="desc"><b>Grooming & Spa</b><br>Pamper your pets with our professional grooming and spa treatments.</div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1518715308788-3005759c61d3?auto=format&fit=crop&w=600&q=80" alt="Checkups" />
          <div class="desc"><b>Health Checkups</b><br>Regular checkups and vaccination clinics by certified vets.</div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1508672019048-805c876b67e2?auto=format&fit=crop&w=600&q=80" alt="Pet Food" />
          <div class="desc"><b>Premium Pet Foods</b><br>Wide selection of nutritious foods and treats for all pets.</div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1518715308788-3005759c61d3?auto=format&fit=crop&w=600&q=80" alt="Events" />
          <div class="desc"><b>Fun Events</b><br>Pet birthday parties, training workshops, and adoption drives.</div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1518715308788-3005759c61d3?auto=format&fit=crop&w=600&q=80" alt="Accessories" />
          <div class="desc"><b>Accessories & Toys</b><br>Toys, beds, leashes, and more for every pet personality.</div>
        </div>
        <div class="carousel-controls">
          <button class="carousel-btn" id="carouselPrev">&#8592;</button>
          <button class="carousel-btn" id="carouselNext">&#8594;</button>
        </div>
      </div>
    </div>
    <!-- Pet of the Month -->
    <div id="petMonthSection" class="section" style="background:#f3f8ff;border-radius:12px;padding:1rem 0 1.2rem 0;margin-bottom:1.5rem;box-shadow:0 2px 8px rgba(44,62,80,0.06);text-align:center;">
      <h2 style="color:#4a90e2;font-size:1.2rem;margin-bottom:0.7rem;">üêæ Pet of the Month</h2>
      <img id="petMonthImg" src="" alt="Pet of the Month" style="width:120px;height:120px;object-fit:cover;border-radius:50%;box-shadow:0 2px 8px #b3e5fc;margin-bottom:0.5rem;">
      <div style="font-weight:700;font-size:1.1rem;" id="petMonthName"></div>
      <div style="font-size:0.98rem;color:#555;" id="petMonthDesc"></div>
    </div>
    <!-- Registration -->
    <div id="registrationSection" class="section">
      <label for="name">Your Name</label>
      <input type="text" id="name" placeholder="Enter your name" required />
      <label for="email">Your Email</label>
      <input type="email" id="email" placeholder="Enter your email" required />
      <label for="petName">Your Pet's Name</label>
      <input type="text" id="petName" placeholder="Pet's name (optional)" />
      <label for="petBirthday">Pet's Birthday</label>
      <input type="date" id="petBirthday" />
      <button id="registerBtn">Register</button>
    </div>
    <!-- Promotions, Loyalty, Badges, Spin Wheel, Survey, Feedback -->
    <div id="promoSection" class="section" style="display:none;">
      <h2 style="text-align:center; color:#ff9800;">Current Promotions</h2>
      <ul id="promoList" class="promo-list"></ul>
      <!-- Spin the Wheel (fixed) -->
      <div style="margin:1.5rem 0;text-align:center;">
        <h2 style="color:#e67e22;font-size:1.3rem;">üé∞ Spin-the-Wheel Discount</h2>
        <canvas id="spinWheel" width="260" height="260" style="margin-bottom:0.5rem;background:#fffbe7;border-radius:50%;box-shadow:0 2px 8px #ffe082;"></canvas><br>
        <button id="spinBtn">Spin the Wheel!</button>
        <div id="spinResult" style="margin-top:0.7rem;font-weight:700;color:#388e3c;"></div>
      </div>
      <!-- Loyalty, Mood, Badges -->
      <div class="loyalty" id="loyaltyStatus"></div>
      <div id="badgesSection" style="text-align:center;margin-bottom:1.2rem;"></div>
      <!-- Pet Birthday Reminder -->
      <div id="petBirthdayMsg" style="text-align:center;color:#e67e22;font-weight:700;margin-bottom:1rem;"></div>
      <!-- Fun Fact Generator -->
      <div id="petFactSection" style="background:#fffbe7;border-radius:10px;padding:0.7rem 1rem;margin-bottom:1.2rem;text-align:center;font-size:1.05rem;color:#7c5c3b;">
        <span style="font-weight:700;">üêï Did you know?</span> <span id="petFact"></span>
        <button id="newFactBtn" style="margin-left:0.7rem;padding:0.2rem 0.7rem;font-size:0.9rem;width:auto;">üîÑ</button>
      </div>
      <!-- Mini Survey -->
      <div id="surveySection" style="background:#f3f8ff;border-radius:10px;padding:1rem 1rem 0.5rem 1rem;margin-bottom:1.2rem;">
        <div style="font-weight:700;margin-bottom:0.5rem;">Mini Survey: What's your pet's favorite?</div>
        <form id="surveyForm">
          <label><input type="radio" name="fav" value="Food" required> Food</label><br>
          <label><input type="radio" name="fav" value="Toys"> Toys</label><br>
          <label><input type="radio" name="fav" value="Grooming"> Grooming</label><br>
          <label><input type="radio" name="fav" value="Walks"> Walks</label><br>
          <button type="submit" style="margin-top:0.7rem;">Submit Survey</button>
        </form>
        <div id="surveyMsg" style="color:#388e3c;font-weight:700;margin-top:0.5rem;display:none;">You're a true pet lover! üêæ</div>
      </div>
      <!-- Feedback -->
      <h2 style="text-align:center; color:#ff9800;">Feedback</h2>
      <textarea id="feedbackInput" placeholder="Share your feedback or pet story!"></textarea>
      <button id="submitFeedbackBtn">Submit Feedback</button>
      <div class="feedback-success" id="feedbackSuccess">Thank you for your feedback! üêæ</div>
    </div>
  </div>
  <!-- Modal for spin result -->
  <div class="modal" id="spinModal">
    <div class="modal-content" id="spinModalContent">
      <div id="spinModalText"></div>
      <button onclick="document.getElementById('spinModal').style.display='none'">Close</button>
    </div>
  </div>
  <!-- Animated Paw Prints (fixed) -->
  <canvas id="pawCanvas" style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:0;"></canvas>
  <script>
    const promotions = [
      { text: "10% off on all dog food!", emoji: "üê∂" },
      { text: "Buy 1 Get 1 Free on Cat Toys", emoji: "üê±" },
      { text: "Free grooming session with every 5th visit!", emoji: "üõÅ" },
      { text: "New arrivals: Exotic Birds!", emoji: "ü¶ú" }
    ];

    const registerBtn = document.getElementById('registerBtn');
    const promoSection = document.getElementById('promoSection');
    const registrationSection = document.getElementById('registrationSection');
    const promoList = document.getElementById('promoList');
    const loyaltyStatus = document.getElementById('loyaltyStatus');
    const feedbackInput = document.getElementById('feedbackInput');
    const submitFeedbackBtn = document.getElementById('submitFeedbackBtn');
    const feedbackSuccess = document.getElementById('feedbackSuccess');
    const spinBtn = document.getElementById('spinBtn');
    const spinResult = document.getElementById('spinResult');
    const petMonthSection = document.getElementById('petMonthSection');
    const petMonthImg = document.getElementById('petMonthImg');
    const petMonthName = document.getElementById('petMonthName');
    const petMonthDesc = document.getElementById('petMonthDesc');
    const newFactBtn = document.getElementById('newFactBtn');
    const petFact = document.getElementById('petFact');
    const surveyForm = document.getElementById('surveyForm');
    const surveyMsg = document.getElementById('surveyMsg');
    const toggleDark = document.getElementById('toggleDark');
    const welcomeBackMsg = document.getElementById('welcomeBackMsg');

    // Dark mode toggle
    toggleDark.onchange = () => {
      document.body.classList.toggle('dark-mode', toggleDark.checked);
      localStorage.setItem('darkMode', toggleDark.checked);
    };

    function loadPromotions() {
      promoList.innerHTML = '';
      promotions.forEach(promo => {
        const li = document.createElement('li');
        li.innerHTML = `<span>${promo.emoji}</span> ${promo.text}`;
        promoList.appendChild(li);
      });
    }

    function updateLoyalty() {
      let visits = parseInt(localStorage.getItem('visits') || '0');
      let nextReward = 5 - (visits % 5);
      loyaltyStatus.innerHTML = `üêæ You have visited us <b>${visits}</b> time(s).<br>Visit <b>${nextReward}</b> more time(s) to earn a free treat for your pet!`;
      loyaltyStatus.style.background = visits % 5 === 0 && visits !== 0 ? '#ffe0b2' : '#e1f7fa';
      loyaltyStatus.style.color = visits % 5 === 0 && visits !== 0 ? '#ff9800' : '#2d5a5c';
      if (visits % 5 === 0 && visits !== 0) {
        loyaltyStatus.innerHTML += '<br>üéâ Congratulations! You earned a free treat! üéâ';
      }
    }

    function showPetOfTheMonth() {
      const petOfTheMonth = JSON.parse(localStorage.getItem('petOfTheMonth'));
      if (petOfTheMonth) {
        petMonthImg.src = petOfTheMonth.img;
        petMonthName.innerText = petOfTheMonth.name;
        petMonthDesc.innerText = petOfTheMonth.desc;
        petMonthSection.style.display = 'block';
      }
    }

    registerBtn.onclick = () => {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const petName = document.getElementById('petName').value.trim();
      const petBirthday = document.getElementById('petBirthday').value.trim();
      if (name && email) {
        localStorage.setItem('customerName', name);
        localStorage.setItem('customerEmail', email);
        if (petName) localStorage.setItem('petName', petName);
        if (petBirthday) localStorage.setItem('petBirthday', petBirthday);
        let visits = parseInt(localStorage.getItem('visits') || '0');
        if (!visits) localStorage.setItem('visits', '1');
        registrationSection.style.display = 'none';
        promoSection.style.display = 'block';
        loadPromotions();
        updateLoyalty();
        showPetOfTheMonth();
        welcomeBackMsg.style.display = 'block';
        welcomeBackMsg.innerText = `Welcome back, ${name}!`;
      } else {
        alert('Please enter both name and email.');
      }
    };

    submitFeedbackBtn.onclick = () => {
      const feedback = feedbackInput.value.trim();
      if (feedback) {
        let feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
        feedbacks.push({ name: localStorage.getItem('customerName'), feedback, date: new Date().toISOString() });
        localStorage.setItem('feedbacks', JSON.stringify(feedbacks));
        feedbackInput.value = '';
        feedbackSuccess.style.display = 'block';
        setTimeout(() => { feedbackSuccess.style.display = 'none'; }, 2000);
      } else {
        alert('Please enter your feedback before submitting.');
      }
    };

    // Spin the Wheel functionality
    spinBtn.onclick = () => {
      const randomDegree = Math.floor(Math.random() * 360 + 720);
      const wheel = document.getElementById('spinWheel');
      wheel.style.transition = 'transform 4s cubic-bezier(0.33, 1, 0.68, 1)';
      wheel.style.transform = `rotate(${randomDegree}deg)`;
      const rewardIndex = Math.floor((randomDegree % 360) / (360 / promotions.length));
      setTimeout(() => {
        spinResult.innerText = `You won: ${promotions[rewardIndex].text}`;
        let visits = parseInt(localStorage.getItem('visits') || '0');
        localStorage.setItem('visits', (visits + 1).toString());
        updateLoyalty();
      }, 4000);
    };

    // Fun Fact Generator
    newFactBtn.onclick = () => {
      const facts = [
        "Dogs' sense of smell is about 40 times better than humans'.",
        "Cats can make over 100 different sounds.",
        "Goldfish can remember things for up to five months.",
        "Parrots are known to be great at mimicking human speech.",
        "Hamsters can run up to 8 miles on a wheel in one night!",
        "Rabbits' teeth never stop growing.",
        "Guinea pigs are social animals and enjoy the company of their kind.",
        "Chinchillas have the softest fur of any land mammal.",
        "Ferrets are known for their playful and curious nature.",
        "Turtles can breathe through their butts (cloacal respiration)."
      ];
      const randomFact = facts[Math.floor(Math.random() * facts.length)];
      petFact.innerText = randomFact;
    };

    // Mini Survey submission
    surveyForm.onsubmit = (e) => {
      e.preventDefault();
      const formData = new FormData(surveyForm);
      const favorite = formData.get('fav');
      localStorage.setItem('petFavorite', favorite);
      surveyMsg.style.display = 'block';
      setTimeout(() => { surveyMsg.style.display = 'none'; }, 2000);
    };

    // Simulate a visit every time the user loads the app after registration
    function incrementVisit() {
      if (localStorage.getItem('customerName')) {
        let visits = parseInt(localStorage.getItem('visits') || '0');
        localStorage.setItem('visits', (visits + 1).toString());
      }
    }

    // Auto-load if already registered
    if (localStorage.getItem('customerName')) {
      registrationSection.style.display = 'none';
      promoSection.style.display = 'block';
      incrementVisit();
      loadPromotions();
      updateLoyalty();
      showPetOfTheMonth();
      const registeredName = localStorage.getItem('customerName');
      welcomeBackMsg.style.display = 'block';
      welcomeBackMsg.innerText = `Welcome back, ${registeredName}!`;
    }

    // Load dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
      toggleDark.checked = true;
      document.body.classList.add('dark-mode');
    }

    // --- JS for all features ---
    // 1. Animated Paw Prints (falling from top, fade out)
    const pawCanvas = document.getElementById('pawCanvas');
    const pawCtx = pawCanvas.getContext('2d');
    function resizePawCanvas() {
      pawCanvas.width = window.innerWidth;
      pawCanvas.height = window.innerHeight;
    }
    resizePawCanvas();
    window.addEventListener('resize', resizePawCanvas);
    const pawImgs = [
      'data:image/svg+xml;utf8,<svg width="24" height="24" viewBox="0 0 24 24" fill="%23b388ff" xmlns="http://www.w3.org/2000/svg"><ellipse cx="12" cy="20" rx="5" ry="3"/><ellipse cx="5" cy="14" rx="2" ry="3"/><ellipse cx="19" cy="14" rx="2" ry="3"/><ellipse cx="8" cy="8" rx="2" ry="2.5"/><ellipse cx="16" cy="8" rx="2" ry="2.5"/></svg>',
      'data:image/svg+xml;utf8,<svg width="24" height="24" viewBox="0 0 24 24" fill="%23ffb347" xmlns="http://www.w3.org/2000/svg"><ellipse cx="12" cy="20" rx="5" ry="3"/><ellipse cx="5" cy="14" rx="2" ry="3"/><ellipse cx="19" cy="14" rx="2" ry="3"/><ellipse cx="8" cy="8" rx="2" ry="2.5"/><ellipse cx="16" cy="8" rx="2" ry="2.5"/></svg>'
    ];
    let pawParticles = [];
    function spawnPawParticle() {
      const x = Math.random() * window.innerWidth;
      const y = -24;
      const speed = 1 + Math.random() * 1.5;
      const img = new window.Image();
      img.src = pawImgs[Math.floor(Math.random()*pawImgs.length)];
      pawParticles.push({x, y, speed, img, alpha: 1, rot: Math.random()*2*Math.PI});
    }
    function animatePawParticles() {
      pawCtx.clearRect(0, 0, pawCanvas.width, pawCanvas.height);
      for (let i = 0; i < pawParticles.length; i++) {
        const p = pawParticles[i];
        pawCtx.save();
        pawCtx.globalAlpha = p.alpha;
        pawCtx.translate(p.x, p.y);
        pawCtx.rotate(p.rot);
        pawCtx.drawImage(p.img, -12, -12, 24, 24);
        pawCtx.restore();
        p.y += p.speed;
        p.alpha -= 0.0025;
        p.rot += 0.01;
      }
      pawParticles = pawParticles.filter(p => p.y < window.innerHeight + 24 && p.alpha > 0);
      if (Math.random() < 0.13) spawnPawParticle();
      requestAnimationFrame(animatePawParticles);
    }
    animatePawParticles();

    // 2. Dark Mode (fix)
    function setDarkMode(on) {
      document.body.style.background = on ?
        "linear-gradient(rgba(40,40,40,0.92),rgba(40,40,40,0.92)),url('https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=1500&q=80') center/cover no-repeat fixed"
        :
        "linear-gradient(rgba(255,255,255,0.85), rgba(255,255,255,0.85)),url('https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=1500&q=80') center/cover no-repeat fixed";
      document.body.style.color = on ? '#f5f5f5' : '';
      document.querySelector('.container').style.background = on ? 'rgba(40,40,40,0.97)' : 'rgba(255,255,255,0.95)';
      document.querySelector('.container').style.boxShadow = on ? '0 8px 32px rgba(0,0,0,0.38)' : '0 8px 32px rgba(0,0,0,0.18)';
      // About section
      document.getElementById('aboutSection').style.background = on ? '#23272f' : '#f3f8ff';
      document.getElementById('aboutSection').style.color = on ? '#e0e0e0' : '#555';
      // Pet of the Month
      document.getElementById('petMonthSection').style.background = on ? '#23272f' : '#f3f8ff';
      document.getElementById('petMonthSection').style.color = on ? '#e0e0e0' : '#555';
      // Fun Fact
      document.getElementById('petFactSection').style.background = on ? '#23272f' : '#fffbe7';
      document.getElementById('petFactSection').style.color = on ? '#e0e0e0' : '#7c5c3b';
      // Survey
      document.getElementById('surveySection').style.background = on ? '#23272f' : '#f3f8ff';
      document.getElementById('surveySection').style.color = on ? '#e0e0e0' : '#555';
      // Loyalty
      document.getElementById('loyaltyStatus').style.background = on ? '#2d3a3a' : '#e1f7fa';
      document.getElementById('loyaltyStatus').style.color = on ? '#ffe082' : '#2d5a5c';
      // Spin wheel
      document.getElementById('spinWheel').style.background = on ? '#23272f' : '#fffbe7';
      localStorage.setItem('darkMode', on ? '1' : '0');
    }
    document.getElementById('toggleDark').onchange = function() { setDarkMode(this.checked); };
    if(localStorage.getItem('darkMode')==='1') { document.getElementById('toggleDark').checked=true; setDarkMode(true); }

    // 3. Spin-the-Wheel (real wheel, rewards)
    const spinRewards = [
      { label: "5% off next visit", color: "#ffe082" },
      { label: "Free dog treat", color: "#b2dfdb" },
      { label: "+1 Loyalty Point", color: "#ffccbc" },
      { label: "10% off toys", color: "#c5e1a5" },
      { label: "Free catnip sample", color: "#f8bbd0" },
      { label: "Better luck next time!", color: "#e0e0e0" }
    ];
    let spinning = false;
    function drawWheel(angle=0) {
      const ctx = document.getElementById('spinWheel').getContext('2d');
      ctx.clearRect(0,0,260,260);
      const n = spinRewards.length;
      for(let i=0;i<n;i++){
        ctx.beginPath();
        ctx.moveTo(130,130);
        ctx.arc(130,130,120,2*Math.PI*i/n+angle,2*Math.PI*(i+1)/n+angle);
        ctx.closePath();
        ctx.fillStyle = spinRewards[i].color;
        ctx.fill();
        ctx.save();
        ctx.translate(130,130);
        ctx.rotate(2*Math.PI*(i+0.5)/n+angle);
        ctx.textAlign='center';ctx.font='bold 18px Quicksand';ctx.fillStyle='#444';
        ctx.fillText(spinRewards[i].label,70,8);
        ctx.restore();
      }
      // Arrow
      ctx.beginPath();ctx.moveTo(130,20);ctx.lineTo(120,50);ctx.lineTo(140,50);ctx.closePath();ctx.fillStyle="#e67e22";ctx.fill();
    }
    drawWheel();
    document.getElementById('spinBtn').onclick = function(){
      if(spinning) return;
      spinning=true;document.getElementById('spinResult').textContent='';
      let angle=0,speed=0.35+Math.random()*0.2,decay=0.985+Math.random()*0.005,steps=0;
      function animate(){
        angle+=speed;speed*=decay;steps++;
        drawWheel(angle);
        if(speed>0.01||steps<60){requestAnimationFrame(animate);}else{
          let idx = Math.floor(((2*Math.PI-angle%(2*Math.PI))/(2*Math.PI))*spinRewards.length)%spinRewards.length;
          let reward = spinRewards[idx].label;
          localStorage.setItem('spinReward',reward);
          document.getElementById('spinResult').textContent = '';
          // Show modal popup
          document.getElementById('spinModalText').textContent = 'You won: '+reward;
          document.getElementById('spinModal').style.display = 'flex';
          spinning=false;
        }
      }
      animate();
    };
    if(localStorage.getItem('spinReward')){
      document.getElementById('spinResult').textContent = 'You won: '+localStorage.getItem('spinReward');
    }

    // Carousel logic
    const slides = document.querySelectorAll('.carousel-slide');
    let currentSlide = 0;
    function showSlide(idx) {
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === idx);
      });
    }
    document.getElementById('carouselPrev').onclick = function() {
      currentSlide = (currentSlide - 1 + slides.length) % slides.length;
      showSlide(currentSlide);
    };
    document.getElementById('carouselNext').onclick = function() {
      currentSlide = (currentSlide + 1) % slides.length;
      showSlide(currentSlide);
    };
    setInterval(() => {
      currentSlide = (currentSlide + 1) % slides.length;
      showSlide(currentSlide);
    }, 3500);
    // Touch swipe support
    let startX = null;
    document.getElementById('serviceCarousel').addEventListener('touchstart', e => {
      startX = e.touches[0].clientX;
    });
    document.getElementById('serviceCarousel').addEventListener('touchend', e => {
      if(startX === null) return;
      let dx = e.changedTouches[0].clientX - startX;
      if(Math.abs(dx) > 40) {
        if(dx > 0) document.getElementById('carouselPrev').click();
        else document.getElementById('carouselNext').click();
      }
      startX = null;
    });
  </script>
</body>
</html>
